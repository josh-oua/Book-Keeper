<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Book Keeper — Register</title>
  <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="auth-layout">
  <div class="auth-banner">
    <img src="img/logo.png" alt="Logo" class="auth-logo">
    <h2>College of Computer Studies</h2>
    <h1>BOOK KEEPER</h1>
  </div>
  <div class="auth-form-wrapper">
    <div class="auth-box">
      <form class="auth-form" action="../api/register.php" method="post" id="regForm">
        <h2>Register</h2>

        <label>Student No.</label>
        <input type="text" name="student_no" required>
        <small class="error" id="studentNoError"></small>

        <label>Name</label>
        <input type="text" name="name" required id="nameField">

        <label>Password</label>
        <input type="password" name="password" required>
        <small class="error" id="passwordError"></small>

        <label>Confirm password</label>
        <input type="password" name="confirm_password" required>
        <small class="error" id="confirmError"></small>

        <div class="auth-actions">
          <button type="submit" class="btn btn-red">Register</button>
        </div>

        <p class="small"><a href="login.html">Back to login</a></p>
      </form>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const form = document.getElementById("regForm");

      form.addEventListener("submit", function(e) {
        let valid = true;

        const studentNo = form.querySelector("[name='student_no']");
        const nameField = document.getElementById("nameField");
        const password = form.querySelector("[name='password']");
        const confirmPassword = form.querySelector("[name='confirm_password']");

        document.getElementById("studentNoError").textContent = "";
        document.getElementById("passwordError").textContent = "";
        document.getElementById("confirmError").textContent = "";

        if (!/^\d+$/.test(studentNo.value)) {
          document.getElementById("studentNoError").textContent = "❌ Student number must contain digits only.";
          valid = false;
        }

        if (password.value.length < 8) {
          document.getElementById("passwordError").textContent = "❌ Password must be at least 8 characters.";
          valid = false;
        }

        if (password.value !== confirmPassword.value) {
          document.getElementById("confirmError").textContent = "❌ Passwords do not match.";
          valid = false;
        }

        if (valid) {
          localStorage.setItem("username", nameField.value);
        } else {
          e.preventDefault();
        }
      });
    });
  </script>
</body>
</html>
